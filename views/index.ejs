<!DOCTYPE html>
<html>

<head>
  <title>
    Download YouTube Videos
  </title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" />
  <meta charset="UTF-8">
  <meta property="title" content="YouTube Video Downloader - Download YouTube Videos" />
  <meta property="description" content="Download YouTube videos" />
  <meta http-equiv="refresh" content="120">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
  <!-- <h1>
    <%= title %>
  </h1> -->
  <!-- <p>Welcome to <%= title %></p> -->
  <div class="ftco-section center">
    <div class="container">
      <p>Download YouTube videos</p>
      <form id="main-form" class="search-form relative" method="POST" role="search">
        <input id="url" type="text" name="url" class="search__input" aria-label="Search"
          placeholder="Enter Video Url" required autofocus>
        <button id="submit" class="btn-red" type="submit">Click Me</button>
      </form>


      <div id="content-wrapper" class="wapper">
        <% if (videoData && videoData.player_response) { %>
          <% var miliseconds=videoData.player_response.streamingData.formats[0].approxDurationMs; var
            minutes=Math.floor(miliseconds / 60000); var seconds=((miliseconds % 60000) / 1000).toFixed(0); const
            videoTime=minutes + ":" + (seconds < 10 ? '0' : '' ) + seconds; %>
            <form id="main-form" class="search-form relative" action="download" method="POST" role="download">
              <div class="thumbnail clearfix mt-5"><input type="hidden" id="video_id" value="HYUpNJJELeE">
                <img
                  src="<%= videoData.player_response.videoDetails.thumbnail.thumbnails[videoData.player_response.videoDetails.thumbnail.thumbnails.length - 1].url %>"
                  width="300px" height="250px" alt="YouTube Video Downloader" style="width: 100%; height: 100%">
                <h2><a href="javascript:void(0);">
                    <%= videoData.player_response.videoDetails.title %>
                  </a>
                </h2>
                <p class="time">
                  <%= videoTime %>
                </p>
                <input type="hidden" name="url" value="<%= url %>" />
                <input type="hidden" name="title" value="<%= videoData.player_response.videoDetails.title %>" />
                <input type="hidden" name="videoId" value="<%= videoData.player_response.videoDetails.videoId %>" />
                <input type="hidden" name="audioTag" value="<%= audio %>" />
                <div class="downfun dispweb"> <button class="btn-action" type="submit">Download</button>
                  <div class="select-box"><select id="format" name="format">
                      <% for(var i=0; i < mimeTypes.length; i++) {%>
                        <option
                          value="<%= JSON.stringify(videoData.player_response.streamingData.adaptiveFormats[i]) %>">
                          <%= mimeTypes[i].qualityLabel %>
                            <%= mimeTypes[i].mimeType %>
                              (<%= mimeTypes[i].length %>)
                        </option>
                        <% } %>

                    </select></div>
                </div>
              </div>
            </form>
            <% } %>

      </div>
    </div>

    <footer>
      <div class="copyright">
        <ul class="flex flex-a-i-center">
          <li>Developed By Ashish</li>
        </ul>
      </div>
    </footer>

    <p>Currently 360P videos download support with voice. Working on HD videos download</p>
    <!-- <p>&nbsp;&nbsp;&nbsp;&nbsp;Visitor number <span id="totalusers"></span></p> -->


</body>

<!-- <script src="http://localhost:9898/socket.io/socket.io.js"></script>
<script>
  function socketConnect() {
    var socket = io.connect("http://localhost:9898/");
    socket.on('totalClients', (msg) => {
      const userTag = document.getElementById('totalusers');
      if (userTag && msg && msg.allClients && msg.allClients.length > 0) {
        userTag.innerHTML = msg.allClients.length;
      }
    });
  }
</script> -->

</html>